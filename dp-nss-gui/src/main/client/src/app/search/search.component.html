<div class="container">
    <h2>Vyhledávání spojení</h2>

    <form (ngSubmit)="onSubmit()" #searchForm="ngForm">
        <div class="form-group">
            <label for="timeTable">Jízdní řád:</label>
            <select class="form-control" id="timeTable" required [(ngModel)]="searchModel.timeTableId" name="timeTableId">
                <option *ngFor="let timeTable of timeTables" [value]="timeTable.id">{{timeTable.name}}</option>
            </select>
        </div>

        <div class="form-group">
            <label for="stopFrom">Odkud:</label>
            <input type="text" class="form-control" id="stopFrom" required [(ngModel)]="searchModel.stopFrom"
                   name="stopFrom" #stopFrom="ngModel">
            <!--TODO odtranit, zde to nechci-->
            <!--<div [hidden]="stopFrom.valid || stopFrom.pristine" class="alert alert-danger">Name is required</div>-->
        </div>

        <div class="form-group">
            <label for="stopTo">Kam:</label>
            <input type="text" class="form-control" id="stopTo" required [(ngModel)]="searchModel.stopTo" name="stopTo">
        </div>

        <div class="form-group">
            <label for="when">Kdy:</label>
            <datetime class="form-controll" id="when" [(ngModel)]="searchModel.date" [datepicker]="dateService.datepickerOpts"
                      [timepicker]="dateService.timepickerOpts" name="when"></datetime>
        </div>

        <div class="form-group">
            <label for="maxNumOfTransfers">Maximální počet přestupů:</label>
            <select class="form-control" id="maxNumOfTransfers" required [(ngModel)]="searchModel.maxNumOfTransfers" name="maxNumOfTransfers">
                <option *ngFor="let numOfTransfer of numOfTransfers" [value]="numOfTransfer">{{numOfTransfer}}</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success" [disabled]="!searchForm.form.valid || submitted">Hledat</button>
    </form>

    <!-- TODO dat do nove komponenty! -->
    <hr/>
    <div *ngIf="searchResults">
        <h3>Nalezené výsledky</h3>

        <table class="table table-bordered" *ngFor="let searchResult of searchResults">
            <tr>
                <th>Datum</th>
                <th>Stanice</th>
                <th>Příjezd</th>
                <th>Odjezd</th>
                <th>Spoj</th>
            </tr>
            <tr *ngFor="let stopTime of searchResult.stopTimes">
                <td>TODO</td>
                <td>{{stopTime.stop.name}}</td>
                <td>{{stopTime.arrival}}</td>
                <td>{{stopTime.departure}}</td>
                <td>{{stopTime.trip.route.shortName}}</td>
            </tr>
        </table>


    </div>


</div>